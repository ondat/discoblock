apiVersion: kuttl.dev/v1beta1
kind: TestAssert
timeout: 360
collectors:
  - type: events
    namespace: storageos
  - type: command
    command: kubectl get po -A -o wide
  - type: command
    command: kubectl get stos -n storageos storageoscluster -o yaml
  - type: command
    command: kubectl logs -n storageos -l app.kubernetes.io/component
  - type: command
    command: kubectl get sa -n storageos -o yaml
commands:
  - command: sleep 10
  - script: "test $(kubectl get stos -n storageos storageoscluster -o jsonpath='{.status.phase}') = Running"
---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: cert-manager
  namespace: cert-manager
status:
  availableReplicas: 0